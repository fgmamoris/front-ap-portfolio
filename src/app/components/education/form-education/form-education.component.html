<div class="d-flex justify-content-center" *ngIf="show; else showRest">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
<ng-template #showRest>
  <!-- <form
    (ngSubmit)="onSubmit(form.value)"
    [formGroup]="form"
    validate
    #f="ngForm"
  >
    <div class="d-flex flex-column flex-md-row justify-content-between mb-3">
      <div class="flex-grow-1">
        <h3 class="mb-2 text-primary">
          Puesto
          <input
            type="text"
            name="puesto"
            id="puesto"
            class="form-control"
            placeholder="Puesto o cargo ocupado"
            formControlName="puesto"
            required
          />
        </h3>
        <div
          *ngIf="puesto.invalid && (puesto.dirty || puesto.touched)"
          class="alert alert-danger"
        >
          <span>La institución debe tener al menos 5 caracteres</span>
        </div>
        <div class="subheading text-primary mb-2">
          Compañia
          <input
            type="text"
            name="compania"
            id="compania"
            class="form-control"
            placeholder="Compañia"
            formControlName="compania"
            required
          />
        </div>
        <div
          *ngIf="compania.invalid && (compania.dirty || compania.touched)"
          class="alert alert-danger"
        >
          <span>La compañia debe tener al menos 5 caracteres</span>
        </div>

        <div class="subheading text-primary">
          Descripción
          <textarea
            name="description"
            class="form-control"
            id="description"
            placeholder="Descripción del cargo ocupado"
            formControlName="descripcion"
            rows="3"
          ></textarea>
        </div>

        <div
          *ngIf="actual.invalid && (actual.dirty || actual.touched)"
          class="alert alert-danger"
        >
          <span>La fecha de inicio es obligatoria</span>
        </div>
      </div>
      <div class="flex-shrink-1 ms-3 mt-3">
        <div style="width: 160px">
          <span class="text-primary">Desde</span>
          <input
            type="date"
            name="fechaInicioString"
            id="fechaInicioString"
            class="form-control"
            formControlName="fechaInicioString"
            required
            autofocus
            value="{{ fechaInicioString }}"
            (change)="onDateChangeStart()"
          />
        </div>
        <div style="width: 160px">
          <span class="text-primary">Desde</span>
          <input
            type="date"
            name="fechaInicioString"
            id="fechaInicioString"
            class="form-control"
            formControlName="fechaInicioString"
            required
            autofocus
            value="{{ fechaInicioString }}"
            (change)="onDateChangeStart()"
          />
        </div>
        <div
          *ngIf="
            fechaInicio.invalid && (fechaInicio.dirty || fechaInicio.touched)
          "
          class="alert alert-danger"
        >
          <span>La fecha de inicio es obligatoria</span>
        </div>
        <div style="width: 160px" class="mt-md-3">
          <span class="text-primary">Hasta</span>
          <input
            type="date"
            name="fechaFinString"
            id="fechaFinString"
            class="form-control"
            formControlName="fechaFinString"
            value="{{ fechaFinString }}"
            (change)="onDateChangeEnd()"
          />
        </div>

        <div class="text-primary mt-3" style="padding: 0.5rem">
          Trabajo actual
          <input
            type="checkbox"
            name="actual"
            id="actual"
            class="form-control-input"
            formControlName="actual"
            (change)="onActualCheck()"
          />
        </div>
      </div>
      <h4 class="mt-3">
        <button
          class="btn btn-danger m-2"
          type="button"
          (click)="handlerCancel(0)"
        >
          Cancelar
          <i class="fa-solid fa-circle-xmark"></i>
        </button>
        <button
          class="btn btn-success m-2"
          type="submit"
          [disabled]="form.invalid"
        >
          Confirmar
          <i class="fa-solid fa-circle-check"></i>
        </button>
      </h4>
    </div>
    <h4 class="mt-3">
      <button
        class="btn btn-danger m-2"
        type="button"
        (click)="handlerCancel(0)"
      >
        Cancelar
        <i class="fa-solid fa-circle-xmark"></i>
      </button>
      <button
        class="btn btn-success m-2"
        type="submit"
        [disabled]="form.invalid"
      >
        Confirmar
        <i class="fa-solid fa-circle-check"></i>
      </button>
    </h4>
  </form>
  -->

  <!--<form [formGroup]="form">-->
  <form
    (ngSubmit)="onSubmit(form.value)"
    [formGroup]="form"
    validate
    #f="ngForm"
  >
    <div class="row g-3 mt-3">
      <div class="row">
        <div class="col-md-8 mb-3">
          <label class="mb-2 text-primary fw-bold"> Institución </label>
          <input
            type="text"
            name="institucion"
            id="institucion"
            class="form-control"
            placeholder="Nombre de la institución"
            formControlName="institucion"
            required
          />
          <div
            *ngIf="
              institucion.invalid && (institucion.dirty || institucion.touched)
            "
            class="alert alert-danger mt-2"
          >
            <span>La institucion debe tener al menos 5 caracteres</span>
          </div>
        </div>
        <div class="col-md-4 col-sm-4 col-6">
          <label class="mb-2 text-primary"> Desde</label>
          <input
            type="date"
            name="fechaInicioString"
            id="fechaInicioString"
            class="form-control"
            formControlName="fechaInicioString"
            required
            value="{{ fechaInicioString }}"
            (change)="onDateChangeStart()"
          />
          <div
            *ngIf="
              fechaInicio.invalid && (fechaInicio.dirty || fechaInicio.touched)
            "
            class="alert alert-danger mt-2"
          >
            <span>Fecha obligatoria</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-8 mb-3">
          <label class="mb-2 text-primary fw-bold">Título</label>
          <input
            type="text"
            name="titulo"
            id="titulo"
            class="form-control"
            placeholder="Título adquirido"
            formControlName="titulo"
            required
          />
          <div
            *ngIf="titulo.invalid && (titulo.dirty || titulo.touched)"
            class="alert alert-danger mt-2"
          >
            <span>El título debe tener al menos 5 caracteres</span>
          </div>
        </div>
        <div class="col-md-4 col-sm-4 col-6">
          <label class="mb-2 text-primary"> Hasta</label>
          <input
            type="date"
            name="fechaFinString"
            id="fechaFinString"
            class="form-control"
            formControlName="fechaFinString"
            value="{{ fechaFinString }}"
            (change)="onDateChangeEnd()"
            required
          />
        </div>
        <div
          *ngIf="fechaFin.invalid && (fechaFin.dirty || fechaFin.touched)"
          class="alert alert-danger mt-2"
        >
          <span>Fecha obligatoria</span>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 mb-3">
          <label class="mb-2 text-primary fw-bold"> Descripción</label>
          <textarea
            name="descripcion"
            class="form-control"
            id="descripcion"
            [maxlength]="10000"
            placeholder="Descripción del cargo ocupado"
            formControlName="descripcion"
            rows="3"
          ></textarea>
          <span
            class="text-primary mt-2"
            *ngIf="descripcion?.value.length > 10000"
          >
            10000 caracateres máximo
          </span>
          <span
            class="text-primary mt-2"
            *ngIf="descripcion?.value.length === 10000"
          >
            Alcanzó el máximo permitido
          </span>
        </div>
      </div>
    </div>
    <div class="row">
      <h4 class="mt-3">
        <button
          class="btn btn-danger m-2"
          type="button"
          (click)="handlerCancel(0)"
        >
          Cancelar
          <i class="fa-solid fa-circle-xmark"></i>
        </button>
        <button
          class="btn btn-success m-2"
          type="submit"
          [disabled]="form.invalid"
        >
          Confirmar
          <i class="fa-solid fa-circle-check"></i>
        </button>
      </h4>
    </div>
  </form>
</ng-template>
